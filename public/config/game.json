{
  "player": {
    "initialStats": {
      "hp": 100,
      "maxHp": 100,
      "attack": 10,
      "defense": 5,
      "evasionRate": 0.05
    },
    "levelUpConfig": {
      "experienceTable": [100, 220, 360, 520, 700, 900, 1120, 1360, 1620, 1900],
      "statGrowthRates": {
        "hp": 1.1,
        "attack": 1.2,
        "defense": 1.2
      },
      "maxLevel": 100
    },
    "hungerConfig": {
      "maxValue": 100,
      "decreaseRate": 1,
      "minValue": 0,
      "damageAmount": 5,
      "recoveryAmount": 20,
      "maxOverfeedTime": 10
    },
    "movementConfig": {
      "distance": 1,
      "directions": ["up", "down", "left", "right"],
      "restrictions": []
    }
  },
  "combat": {
    "baseDamageFormula": "{attack * 1.3 * (35/36)^defense} * random(7/8, 9/8)",
    "minDamage": 1,
    "randomRange": {
      "min": 0.875,
      "max": 1.125
    },
    "defenseReductionBase": 0.9722222222222222,
    "attackMultiplier": 1.3,
    "criticalChance": 0.05,
    "criticalEffect": "defense-ignore",
    "criticalFormula": "{attack * 1.3} * random(7/8, 9/8)",
    "evasionEnabled": true,
    "baseEvasionRate": 0.05,
    "evasionEffect": "damage-zero",
    "evasionTiming": "pre-damage",
    "unavoidableAttackFlag": false,
    "statusEffects": {
      "poison": {
        "id": "poison",
        "name": "Poison",
        "description": "Takes damage each turn",
        "effect": "poison",
        "recoverySystem": {
          "type": "turn-based-probability",
          "baseChance": 0.1,
          "chanceIncrease": 0.05,
          "maxChance": 0.8,
          "formula": "min(baseChance + (turnsElapsed * chanceIncrease), maxChance)"
        }
      },
      "confusion": {
        "id": "confusion",
        "name": "Confusion",
        "description": "Actions target random directions",
        "effect": "confusion",
        "recoverySystem": {
          "type": "turn-based-probability",
          "baseChance": 0.1,
          "chanceIncrease": 0.05,
          "maxChance": 0.8,
          "formula": "min(baseChance + (turnsElapsed * chanceIncrease), maxChance)"
        }
      },
      "paralysis": {
        "id": "paralysis",
        "name": "Paralysis",
        "description": "Cannot move or attack",
        "effect": "paralysis",
        "recoverySystem": {
          "type": "turn-based-probability",
          "baseChance": 0.1,
          "chanceIncrease": 0.05,
          "maxChance": 0.8,
          "formula": "min(baseChance + (turnsElapsed * chanceIncrease), maxChance)"
        }
      },
      "bind": {
        "id": "bind",
        "name": "Bind",
        "description": "Cannot move but can attack",
        "effect": "bind",
        "recoverySystem": {
          "type": "turn-based-probability",
          "baseChance": 0.1,
          "chanceIncrease": 0.05,
          "maxChance": 0.8,
          "formula": "min(baseChance + (turnsElapsed * chanceIncrease), maxChance)"
        }
      }
    },
    "attributeDamageEnabled": true
  },
  "turnSystem": {
    "phases": [
      {
        "phase": "turn-start",
        "description": "ターン開始処理（ターン数カウント、新規敵出現）",
        "conditions": []
      },
      {
        "phase": "player-action-1",
        "description": "プレイヤー1回目行動（移動、攻撃、アイテム使用）",
        "conditions": []
      },
      {
        "phase": "enemy-action-1",
        "description": "敵1回目行動（移動・攻撃）",
        "conditions": []
      },
      {
        "phase": "ally-action-1",
        "description": "味方1回目行動（移動・攻撃）",
        "conditions": []
      },
      {
        "phase": "trap-processing-1",
        "description": "1回目行動後の罠処理",
        "conditions": []
      },
      {
        "phase": "mid-turn-recovery",
        "description": "中間回復処理（倍速者のみ）",
        "conditions": ["fast-entities-only"]
      },
      {
        "phase": "player-action-2",
        "description": "プレイヤー2回目行動（倍速のみ）",
        "conditions": ["player-is-fast"]
      },
      {
        "phase": "enemy-action-2",
        "description": "敵2回目行動（倍速のみ）",
        "conditions": ["enemy-is-fast"]
      },
      {
        "phase": "ally-action-2",
        "description": "味方2回目行動（倍速のみ）",
        "conditions": ["ally-is-fast"]
      },
      {
        "phase": "trap-processing-2",
        "description": "2回目行動後の罠処理",
        "conditions": []
      },
      {
        "phase": "end-turn-recovery",
        "description": "ターン終了時の回復処理",
        "conditions": []
      },
      {
        "phase": "end-turn",
        "description": "ターン終了処理",
        "conditions": []
      }
    ],
    "speedSystem": {
      "normal": {
        "action1": {
          "enabled": true,
          "canMove": true,
          "canAttack": true,
          "canUseItem": true
        },
        "action2": {
          "enabled": false,
          "canMove": false,
          "canAttack": false,
          "canUseItem": false
        },
        "description": "通常速度（1回目行動のみ）"
      },
      "fast": {
        "action1": {
          "enabled": true,
          "canMove": true,
          "canAttack": true,
          "canUseItem": true
        },
        "action2": {
          "enabled": true,
          "canMove": true,
          "canAttack": true,
          "canUseItem": true,
          "adjacentRule": true
        },
        "description": "倍速（2回行動、隣接時は2回目の移動・攻撃をスキップ）"
      },
      "slow": {
        "action1": {
          "enabled": false,
          "canMove": false,
          "canAttack": false,
          "canUseItem": false,
          "skipTurns": 1
        },
        "action2": {
          "enabled": false,
          "canMove": false,
          "canAttack": false,
          "canUseItem": false
        },
        "description": "鈍足（2ターンに1回、強制的に待機）"
      }
    },
    "endTurnProcessing": [
      {
        "process": "death-check",
        "order": 1,
        "description": "死亡エンティティのチェックと削除"
      },
      {
        "process": "status-recovery",
        "order": 2,
        "description": "状態異常の回復判定"
      },
      {
        "process": "slip-damage",
        "order": 3,
        "description": "毒などのスリップダメージ"
      },
      {
        "process": "hunger-decrease",
        "order": 4,
        "description": "満腹度の減少"
      }
    ]
  },
  "dungeon": {
    "coordinateConstraints": {
      "roomCenterEven": true,
      "corridorOddOnly": true
    },
    "defaultTileset": {
      "imagePath": "/images/base.png",
      "tileSize": 32,
      "tiles": {
        "floor": { "x": 1, "y": 4, "width": 1, "height": 1 },
        "wall": { "x": 1, "y": 10, "width": 1, "height": 1 },
        "stairs-down": { "x": 6, "y": 51, "width": 1, "height": 1 },
        "stairs-up": { "x": 6, "y": 52, "width": 1, "height": 1 }
      },
      "overlay": {
        "wall": { "x": 1, "y": 10, "width": 1, "height": 1 }
      }
    },
    "dungeonSpecificTilesets": {
      "beginner-cave": {
        "imagePath": "/images/base.png",
        "tileSize": 32,
        "tiles": {
          "floor": { "x": 1, "y": 4, "width": 1, "height": 1 },
          "wall": { "x": 1, "y": 10, "width": 1, "height": 1 },
          "stairs-down": { "x": 6, "y": 51, "width": 1, "height": 1 },
          "stairs-up": { "x": 6, "y": 52, "width": 1, "height": 1 }
        },
        "overlay": {
          "wall": { "x": 1, "y": 10, "width": 1, "height": 1 }
        }
      }
    }
  },
  "items": {
    "spritesheet": {
      "imagePath": "/images/base.png",
      "tileSize": 16,
      "sprites": {
        "weapon-melee": { "x": 2, "y": 5, "width": 1, "height": 1 },
        "weapon-ranged": { "x": 3, "y": 5, "width": 1, "height": 1 },
        "armor": { "x": 4, "y": 5, "width": 1, "height": 1 },
        "accessory": { "x": 5, "y": 5, "width": 1, "height": 1 },
        "unknown-item": { "x": 1, "y": 6, "width": 1, "height": 1 },
        "consumable": { "x": 2, "y": 157.5, "width": 1, "height": 1 }
      }
    },
    "templates": [
      {
        "id": "health-potion",
        "name": "Health Potion",
        "itemType": "consumable",
        "identified": false,
        "cursed": false,
        "spriteId": "consumable",
        "effects": [ { "type": "heal", "value": 20, "description": "Restores 20 HP" } ]
      },
      {
        "id": "bread",
        "name": "Bread",
        "itemType": "consumable",
        "identified": true,
        "cursed": false,
        "spriteId": "consumable",
        "effects": [ { "type": "restore-hunger", "value": 30, "description": "Restores 30 hunger" } ]
      },
      {
        "id": "antidote",
        "name": "Antidote",
        "itemType": "consumable",
        "identified": false,
        "cursed": false,
        "spriteId": "consumable",
        "effects": [ { "type": "cure-status", "statusType": "poison", "description": "Cures poison" } ]
      },
      {
        "id": "scroll-identify",
        "name": "Scroll of Identify",
        "itemType": "consumable",
        "identified": false,
        "cursed": false,
        "spriteId": "consumable",
        "effects": [ { "type": "identify", "description": "Identifies all items in inventory" } ]
      },
      {
        "id": "scroll-teleport",
        "name": "Scroll of Teleport",
        "itemType": "consumable",
        "identified": false,
        "cursed": false,
        "spriteId": "consumable",
        "effects": [ { "type": "teleport", "description": "Teleports to random location" } ]
      }
    ]
  },
  "monsters": {
    "spawnLimits": {
      "maxPerFloor": 50,
      "baseSpawnPerRoom": 1,
      "randomVariation": 2
    },
    "spritesheets": {
      "basic": {
        "imagePath": "/images/pipo-simpleenemy01a.png",
        "tileSize": 32,
        "sprites": {
          "enemy-0-0": { "x": 0, "y": 0, "width": 1, "height": 1 },
          "enemy-0-1": { "x": 0, "y": 1, "width": 1, "height": 1 },
          "enemy-0-2": { "x": 0, "y": 2, "width": 1, "height": 1 },
          "enemy-1-0": { "x": 1, "y": 0, "width": 1, "height": 1 },
          "enemy-1-1": { "x": 1, "y": 1, "width": 1, "height": 1 },
          "enemy-1-2": { "x": 1, "y": 2, "width": 1, "height": 1 },
          "enemy-1-3": { "x": 1, "y": 3, "width": 1, "height": 1 },
          "enemy-2-0": { "x": 2, "y": 0, "width": 1, "height": 1 },
          "enemy-2-1": { "x": 2, "y": 1, "width": 1, "height": 1 },
          "enemy-2-2": { "x": 2, "y": 2, "width": 1, "height": 1 },
          "enemy-2-3": { "x": 2, "y": 3, "width": 1, "height": 1 },
          "enemy-3-0": { "x": 3, "y": 0, "width": 1, "height": 1 },
          "enemy-3-1": { "x": 3, "y": 1, "width": 1, "height": 1 },
          "enemy-3-2": { "x": 3, "y": 2, "width": 1, "height": 1 },
          "enemy-3-3": { "x": 3, "y": 3, "width": 1, "height": 1 },
          "enemy-4-0": { "x": 4, "y": 0, "width": 1, "height": 1 },
          "enemy-4-1": { "x": 4, "y": 1, "width": 1, "height": 1 },
          "enemy-4-2": { "x": 4, "y": 2, "width": 1, "height": 1 },
          "enemy-4-3": { "x": 4, "y": 3, "width": 1, "height": 1 },
          "enemy-5-0": { "x": 5, "y": 0, "width": 1, "height": 1 },
          "enemy-5-1": { "x": 5, "y": 1, "width": 1, "height": 1 },
          "enemy-5-2": { "x": 5, "y": 2, "width": 1, "height": 1 },
          "enemy-5-3": { "x": 5, "y": 3, "width": 1, "height": 1 }
        }
      },
      "elite": {
        "imagePath": "/images/pipo-simpleenemy01c.png",
        "tileSize": 32,
        "sprites": {
          "enemy-0-0": { "x": 0, "y": 0, "width": 1, "height": 1 },
          "enemy-0-1": { "x": 0, "y": 1, "width": 1, "height": 1 },
          "enemy-0-2": { "x": 0, "y": 2, "width": 1, "height": 1 },
          "enemy-1-0": { "x": 1, "y": 0, "width": 1, "height": 1 },
          "enemy-1-1": { "x": 1, "y": 1, "width": 1, "height": 1 },
          "enemy-1-2": { "x": 1, "y": 2, "width": 1, "height": 1 },
          "enemy-1-3": { "x": 1, "y": 3, "width": 1, "height": 1 },
          "enemy-2-0": { "x": 2, "y": 0, "width": 1, "height": 1 },
          "enemy-2-1": { "x": 2, "y": 1, "width": 1, "height": 1 },
          "enemy-2-2": { "x": 2, "y": 2, "width": 1, "height": 1 },
          "enemy-2-3": { "x": 2, "y": 3, "width": 1, "height": 1 },
          "enemy-3-0": { "x": 3, "y": 0, "width": 1, "height": 1 },
          "enemy-3-1": { "x": 3, "y": 1, "width": 1, "height": 1 },
          "enemy-3-2": { "x": 3, "y": 2, "width": 1, "height": 1 },
          "enemy-3-3": { "x": 3, "y": 3, "width": 1, "height": 1 },
          "enemy-4-0": { "x": 4, "y": 0, "width": 1, "height": 1 },
          "enemy-4-1": { "x": 4, "y": 1, "width": 1, "height": 1 },
          "enemy-4-2": { "x": 4, "y": 2, "width": 1, "height": 1 },
          "enemy-4-3": { "x": 4, "y": 3, "width": 1, "height": 1 },
          "enemy-5-0": { "x": 5, "y": 0, "width": 1, "height": 1 },
          "enemy-5-1": { "x": 5, "y": 1, "width": 1, "height": 1 },
          "enemy-5-2": { "x": 5, "y": 2, "width": 1, "height": 1 },
          "enemy-5-3": { "x": 5, "y": 3, "width": 1, "height": 1 }
        }
      },
      "boss": {
        "imagePath": "/images/pipo-simpleenemy01b.png",
        "tileSize": 32,
        "sprites": {
          "enemy-0-0": { "x": 0, "y": 0, "width": 1, "height": 1 },
          "enemy-0-1": { "x": 0, "y": 1, "width": 1, "height": 1 },
          "enemy-0-2": { "x": 0, "y": 2, "width": 1, "height": 1 },
          "enemy-1-0": { "x": 1, "y": 0, "width": 1, "height": 1 },
          "enemy-1-1": { "x": 1, "y": 1, "width": 1, "height": 1 },
          "enemy-1-2": { "x": 1, "y": 2, "width": 1, "height": 1 },
          "enemy-1-3": { "x": 1, "y": 3, "width": 1, "height": 1 },
          "enemy-2-0": { "x": 2, "y": 0, "width": 1, "height": 1 },
          "enemy-2-1": { "x": 2, "y": 1, "width": 1, "height": 1 },
          "enemy-2-2": { "x": 2, "y": 2, "width": 1, "height": 1 },
          "enemy-2-3": { "x": 2, "y": 3, "width": 1, "height": 1 },
          "enemy-3-0": { "x": 3, "y": 0, "width": 1, "height": 1 },
          "enemy-3-1": { "x": 3, "y": 1, "width": 1, "height": 1 },
          "enemy-3-2": { "x": 3, "y": 2, "width": 1, "height": 1 },
          "enemy-3-3": { "x": 3, "y": 3, "width": 1, "height": 1 },
          "enemy-4-0": { "x": 4, "y": 0, "width": 1, "height": 1 },
          "enemy-4-1": { "x": 4, "y": 1, "width": 1, "height": 1 },
          "enemy-4-2": { "x": 4, "y": 2, "width": 1, "height": 1 },
          "enemy-4-3": { "x": 4, "y": 3, "width": 1, "height": 1 },
          "enemy-5-0": { "x": 5, "y": 0, "width": 1, "height": 1 },
          "enemy-5-1": { "x": 5, "y": 1, "width": 1, "height": 1 },
          "enemy-5-2": { "x": 5, "y": 2, "width": 1, "height": 1 },
          "enemy-5-3": { "x": 5, "y": 3, "width": 1, "height": 1 }
        }
      }
    },
    "animations": {
      "idle": {
        "frames": ["enemy-1-0", "enemy-0-0", "enemy-1-0", "enemy-2-0", "enemy-1-0"],
        "frameDuration": 200
      },
      "front": {
        "frames": ["enemy-1-0", "enemy-0-0", "enemy-1-0", "enemy-2-0", "enemy-1-0"],
        "frameDuration": 200
      },
      "left": {
        "frames": ["enemy-1-1", "enemy-0-1", "enemy-1-1", "enemy-2-1", "enemy-1-1"],
        "frameDuration": 200
      },
      "right": {
        "frames": ["enemy-1-2", "enemy-0-2", "enemy-1-2", "enemy-2-2", "enemy-1-2"],
        "frameDuration": 200
      },
      "back": {
        "frames": ["enemy-1-3", "enemy-0-3", "enemy-1-3", "enemy-2-3", "enemy-1-3"],
        "frameDuration": 200
      },
      "sw": {
        "frames": ["enemy-4-0", "enemy-3-0", "enemy-4-0", "enemy-5-0", "enemy-4-0"],
        "frameDuration": 200
      },
      "se": {
        "frames": ["enemy-4-1", "enemy-3-1", "enemy-4-1", "enemy-5-1", "enemy-4-1"],
        "frameDuration": 200
      },
      "nw": {
        "frames": ["enemy-4-2", "enemy-3-2", "enemy-4-2", "enemy-5-2", "enemy-4-2"],
        "frameDuration": 200
      },
      "ne": {
        "frames": ["enemy-4-3", "enemy-3-3", "enemy-4-3", "enemy-5-3", "enemy-4-3"],
        "frameDuration": 200
      }
    },
    "templates": [
      {
        "id": "simple-enemy",
        "name": "Simple Enemy",
        "monsterType": "basic",
        "spritesheet": "basic",
        "spriteId": "enemy-1-0",
        "stats": {
          "hp": 20,
          "maxHp": 20,
          "attack": 5,
          "defense": 2,
          "evasionRate": 0.05
        },
        "aiType": "simple-aggressive",
        "experienceValue": 15,
        "dropRate": 0.3,
        "dropTableId": "common-drops",
        "level": 1,
        "description": "基本的な敵。弱いが数が多い。"
      },
      {
        "id": "strong-enemy",
        "name": "Strong Enemy",
        "monsterType": "elite",
        "spritesheet": "elite",
        "spriteId": "enemy-1-0",
        "stats": {
          "hp": 35,
          "maxHp": 35,
          "attack": 8,
          "defense": 4,
          "evasionRate": 0.08
        },
        "aiType": "aggressive-chase",
        "experienceValue": 35,
        "dropRate": 0.6,
        "dropTableId": "common-drops",
        "level": 3,
        "description": "中程度の強さの敵。慎重に対処が必要。"
      },
      {
        "id": "boss-enemy",
        "name": "Boss Enemy",
        "monsterType": "boss",
        "spritesheet": "boss",
        "spriteId": "enemy-1-0",
        "stats": {
          "hp": 80,
          "maxHp": 80,
          "attack": 15,
          "defense": 8,
          "evasionRate": 0.12
        },
        "aiType": "boss-aggressive",
        "experienceValue": 100,
        "dropRate": 1.0,
        "dropTableId": "common-drops",
        "level": 5,
        "description": "強力なボス級の敵。最大限の準備が必要。"
      }
    ],
    "dropTables": {
      "basic-dungeon-drops": [
        {
          "itemId": "bread",
          "weight": 40,
          "minCount": 1,
          "maxCount": 1
        },
        {
          "itemId": "health-potion",
          "weight": 35,
          "minCount": 1,
          "maxCount": 1
        },
        {
          "itemId": "gold",
          "weight": 25,
          "minCount": 1,
          "maxCount": 3
        }
      ],
      "large-dungeon-drops": [
        {
          "itemId": "health-potion",
          "weight": 40,
          "minCount": 1,
          "maxCount": 2
        },
        {
          "itemId": "antidote",
          "weight": 30,
          "minCount": 1,
          "maxCount": 1
        },
        {
          "itemId": "gold",
          "weight": 30,
          "minCount": 2,
          "maxCount": 5
        }
      ],
      "beginner-cave-drops": [
        {
          "itemId": "bread",
          "weight": 50,
          "minCount": 1,
          "maxCount": 2
        },
        {
          "itemId": "health-potion",
          "weight": 30,
          "minCount": 1,
          "maxCount": 1
        },
        {
          "itemId": "gold",
          "weight": 20,
          "minCount": 1,
          "maxCount": 2
        }
      ]
    }
  },
  "attributes": {
    "availableAttributes": [
      {
        "id": "fire",
        "name": "Fire",
        "description": "Fire attribute",
        "color": "#ff0000"
      },
      {
        "id": "water",
        "name": "Water",
        "description": "Water attribute",
        "color": "#0000ff"
      },
      {
        "id": "earth",
        "name": "Earth",
        "description": "Earth attribute",
        "color": "#8b4513"
      },
      {
        "id": "air",
        "name": "Air",
        "description": "Air attribute",
        "color": "#87ceeb"
      }
    ],
    "compatibilityMatrix": {
      "fire": {
        "water": 0.8,
        "earth": 1.2,
        "air": 1.0,
        "fire": 1.0
      },
      "water": {
        "fire": 1.2,
        "earth": 1.0,
        "air": 0.8,
        "water": 1.0
      },
      "earth": {
        "fire": 0.8,
        "water": 1.0,
        "air": 1.2,
        "earth": 1.0
      },
      "air": {
        "fire": 1.0,
        "water": 1.2,
        "earth": 0.8,
        "air": 1.0
      }
    },
    "damageMultipliers": {
      "disadvantage": 0.8,
      "neutral": 1.0,
      "advantage": 1.2
    },
    "applicationTiming": "final"
  },
  "ui": {
    "fonts": {
      "primary": "PixelMplus",
      "secondary": "PixelMplus12",
      "fallback": "ui-monospace, SFMono-Regular, Menlo, Consolas, monospace"
    },
    "viewport": {
      "tilesX": 20,
      "tilesY": 9,
      "tileSize": 32
    },
    "minimap": {
      "width": 240,
      "height": 180,
      "playerSize": 0.8,
      "playerColor": "#FFFFFF",
      "colors": {
        "stairs-down": "#87CEEB",
        "stairs-up": "#87CEEB"
      }
    },
    "layout": {
      "maxWidth": 1180,
      "gridTemplateColumns": "1fr",
      "gridTemplateRows": "auto auto"
    },
    "messages": {
      "maxLines": 5
    }
  },
  "input": {
    "keys": {
      "movement": {
        "up": ["ArrowUp", "w", "W"],
        "down": ["ArrowDown", "s", "S"],
        "left": ["ArrowLeft", "a", "A"],
        "right": ["ArrowRight", "d", "D"],
        "northeast": ["e", "E"],
        "southeast": ["c", "C"],
        "southwest": ["z", "Z"],
        "northwest": ["q", "Q"]
      },
      "actions": {
        "confirm": ["z", "Z", "Enter"],
        "cancel": ["x", "X", "Escape"],
        "inventory": ["i", "I"]
      }
    }
  },
  "messages": {
    "ui": {
      "cancel": "キャンセル",
      "attackMiss": "空振りした",
      "stairsConfirmDown": "次の階へ進みますか？",
      "stairsConfirmUp": "前の階へ戻りますか？",
      "stairsAdvanceDown": "次の階へ進んだ",
      "stairsAdvanceUp": "前の階へ戻った",
      "stairsDecline": "いいえを選んだ",
      "itemUseUnimplemented": "決定: アイテム使用は未実装"
    }
  }
}
